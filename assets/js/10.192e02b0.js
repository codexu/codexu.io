(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{218:function(e,t,a){"use strict";a.r(t);var r=a(0),s=Object(r.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"concept"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#concept","aria-hidden":"true"}},[e._v("#")]),e._v(" Concept")]),e._v(" "),a("p",[e._v("If you don't have much knowledge of "),a("a",{attrs:{href:"https://webpack.docschina.org/concepts/",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack"),a("OutboundLink")],1),e._v(", this chapter will take you through the basic workings of X-BUILD, allowing you to save a lot of time and quickly enjoy the webpack. Convenient.")]),e._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[e._v("All the content in this chapter does not require you to configure, just need to know.")])]),e._v(" "),a("h2",{attrs:{id:"entry-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entry-file","aria-hidden":"true"}},[e._v("#")]),e._v(" Entry file")]),e._v(" "),a("p",[e._v("When X-BUILD initializes the project, the association of the entry files is pre-made, so you don't need to care about how the html/js/css files are related:")]),e._v(" "),a("h3",{attrs:{id:"html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#html","aria-hidden":"true"}},[e._v("#")]),e._v(" HTML")]),e._v(" "),a("p",[e._v("The "),a("a",{attrs:{href:"https://webpack.docschina.org/plugins/html-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("HtmlWebpackPlugin"),a("OutboundLink")],1),e._v(" is configured with the HTML entry template file (src/index.[html/pug]), which was selected when you initialized the project. After the Pug(Jade)** option, the pug-loader is automatically installed to support the pug or jade files. It is also recommended to use pug as the template engine for HTML.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://pug.bootcss.com/api/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("What is the pug template engine? "),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css","aria-hidden":"true"}},[e._v("#")]),e._v(" CSS")]),e._v(" "),a("p",[e._v("If you select the "),a("strong",[e._v("CSS Pre-processors")]),e._v(" option when initializing the project, you will be asked again which CSS preprocessor to choose as the development tool (single choice), then install the corresponding loader, recommend at least one CSS pre-control processor.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostCSS"),a("OutboundLink")],1),e._v(" Plugin "),a("a",{attrs:{href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Autoprefixer"),a("OutboundLink")],1),e._v(" Automatically completes the browser private prefix. If you use more plugins, please install them yourself and configure them in postcss.config.js in the directory.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000010984731",target:"_blank",rel:"noopener noreferrer"}},[e._v("Failed to install Sass? "),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript","aria-hidden":"true"}},[e._v("#")]),e._v(" JavaScript")]),e._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://www.babeljs.cn/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Babel"),a("OutboundLink")],1),e._v(" : It allows you to write new versions of JavaScript code that will still work in older browsers.")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://cn.eslint.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ESLint"),a("OutboundLink")],1),e._v(" : A grammar rule and code style checking tool whose goal is to ensure code consistency and avoid errors.")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.tslang.cn/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TypeScript"),a("OutboundLink")],1),e._v(" : TypeScript is not a completely new language, it is a superset of JavaScript, adds a type mechanism to the JavaScript ecosystem, and finally compiles the code. For pure JavaScript code.")])])]),e._v(" "),a("p",[e._v("Quickly created projects don't include these two features, but they are still selected by default in the create command, and they can help you develop more advanced and standardized code.")]),e._v(" "),a("h2",{attrs:{id:"static-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#static-resources","aria-hidden":"true"}},[e._v("#")]),e._v(" Static Resources")]),e._v(" "),a("p",[e._v("Webpack will dynamically package all dependencies, because each module can now explicitly state its own dependencies, avoiding packaging unused modules.")]),e._v(" "),a("h3",{attrs:{id:"create-a-directory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-directory","aria-hidden":"true"}},[e._v("#")]),e._v(" Create a directory "),a("font",{attrs:{color:"red"}},[e._v("*")])],1),e._v(" "),a("p",[e._v("There are no "),a("strong",[e._v("static resources")]),e._v(" directories in the initialized project, but this does not mean that you can place your resource files arbitrarily:")]),e._v(" "),a("p",[e._v("Create a assets/ directory under the src/ directory:")]),e._v(" "),a("p",[a("strong",[e._v("Image")]),e._v(": Create the directory assets/images, support png|jpe?g|gif|svg|webp format.")]),e._v(" "),a("p",[a("strong",[e._v("Font")]),e._v(": Create the directory assets/font, which supports the woff|eot|ttf|otf format.")]),e._v(" "),a("p",[a("strong",[e._v("Video")]),e._v(": Create the directory assets/media/, which supports the mp4|webm|ogg|mp3|wav|flac|aac format.")]),e._v(" "),a("p",[e._v("Webpack treats all resources as modules. You can import these files with "),a("code",[e._v("require('')")]),e._v(". X-BUILD has already installed the loader for reading these files, so you can use it with confidence.")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/loaders/file-loader",target:"_blank",rel:"noopener noreferrer"}},[e._v("Why can static resource files be introduced as modules? "),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"loading-data-late-implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loading-data-late-implementation","aria-hidden":"true"}},[e._v("#")]),e._v(" "),a("s",[e._v("Loading data (late implementation)")])]),e._v(" "),a("p",[e._v("Useful resources that can be loaded are also data such as JSON files, CSV, TSV, and XML. Similar to NodeJS, JSON support is actually built-in, which means that import Data from './data.json' will run normally by default. To import CSV, TSV, and XML, you can use csv-loader and xml-loader. Let's handle loading these three types of files:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm install --save-dev csv-loader xml-loader\n")])])]),a("p",[e._v("Add the following code to loaders in xbuild.config.js :")]),e._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[e._v("loaders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[e._v("/\\.(csv|tsv)$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    Use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'csv-loader'")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[e._v("/\\.xml$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    Use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'xml-loader'")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("h2",{attrs:{id:"development-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#development-environment","aria-hidden":"true"}},[e._v("#")]),e._v(" Development Environment")]),e._v(" "),a("h3",{attrs:{id:"hmr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hmr","aria-hidden":"true"}},[e._v("#")]),e._v(" HMR")]),e._v(" "),a("p",[e._v("Hot module replacement (HMR) is one of the most useful features provided by webpack, which allows all types of modules to be updated at runtime without a full refresh.")]),e._v(" "),a("h3",{attrs:{id:"source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#source-map","aria-hidden":"true"}},[e._v("#")]),e._v(" Source Map")]),e._v(" "),a("p",[e._v("This item maps the compiled code back to the original source code, and when your code reports an error in the browser, it can help you quickly locate the source code.")]),e._v(" "),a("h3",{attrs:{id:"wacth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wacth","aria-hidden":"true"}},[e._v("#")]),e._v(" wacth")]),e._v(" "),a("p",[e._v("When the dependent file changes, it triggers a recompilation, so you don't have to manually run the entire build.")]),e._v(" "),a("h2",{attrs:{id:"production-environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#production-environment","aria-hidden":"true"}},[e._v("#")]),e._v(" Production Environment")]),e._v(" "),a("h3",{attrs:{id:"module-separation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-separation","aria-hidden":"true"}},[e._v("#")]),e._v(" Module separation")]),e._v(" "),a("p",[e._v("This feature separates the code into different bundles and can then load them on demand or in parallel. Code separation can be used to get smaller bundles and control resource loading priorities.")]),e._v(" "),a("h3",{attrs:{id:"css-separation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-separation","aria-hidden":"true"}},[e._v("#")]),e._v(" CSS separation")]),e._v(" "),a("p",[e._v("By default, CSS is packaged in a JavaScript file, and X-BUILD uses "),a("a",{attrs:{href:"https://webpack.docschina.org/plugins/extract-text-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("ExtractTextWebpackPlugin"),a("OutboundLink")],1),e._v(" to extract text (CSS) from the bundle to Separate file.")]),e._v(" "),a("h3",{attrs:{id:"clean-up-the-dist-folder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clean-up-the-dist-folder","aria-hidden":"true"}},[e._v("#")]),e._v(" Clean up the /dist folder")]),e._v(" "),a("p",[e._v("When "),a("code",[e._v("npm run build")]),e._v(" is executed, X-BUILD will output the compiled file in the dist directory of the directory, and will clean up the dist directory when compiling or using the development environment again.")]),e._v(" "),a("h2",{attrs:{id:"environment-variable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#environment-variable","aria-hidden":"true"}},[e._v("#")]),e._v(" Environment Variable")]),e._v(" "),a("p",[e._v("NODE_ENV is a system environment variable exposed by Node.js to the execution script. Process and development environments can be distinguished by process.env.NODE_ENV:")]),e._v(" "),a("p",[e._v("Production environment: "),a("font",{attrs:{color:"MediumSeaGreen"}},[e._v("[ production ]")])],1),e._v(" "),a("p",[e._v("Development environment: "),a("font",{attrs:{color:"MediumSeaGreen"}},[e._v("[ development ]")])],1),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// example\nif (process.env.NODE_ENV !== 'production') {\n  Console.log('Looks like we are in development mode!');\n}\n")])])]),a("h2",{attrs:{id:"adaptive-solutions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adaptive-solutions","aria-hidden":"true"}},[e._v("#")]),e._v(" Adaptive Solutions")]),e._v(" "),a("p",[e._v("X-BUILD uses the adaptive solution of px2rem-loader + hotcss, which can be enabled by selecting "),a("strong",[e._v("Mobile layout")]),e._v(" during initialization.")]),e._v(" "),a("h3",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[e._v("#")]),e._v(" usage")]),e._v(" "),a("p",[e._v("First, communicate with the designer to determine the width of the design draft, such as 750px. Of course, this is not the optimal setting. You can set "),a("strong",[e._v("designWidth")]),e._v(" in xbuild.config.js with type Number.")]),e._v(" "),a("p",[e._v("Then in the code, the size of the elements in the design is how many pixels, and the same size can be written in css. In the browser, you can see that px has been converted to rem. After replacing the device, the display is completely consistent.")]),e._v(" "),a("blockquote",[a("p",[e._v("[REM Adaptive Solutions] (https://juejin.im/post/5ad9a694f265da0b7a203f9b)")])]),e._v(" "),a("h2",{attrs:{id:"request-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-interface","aria-hidden":"true"}},[e._v("#")]),e._v(" request interface")]),e._v(" "),a("p",[e._v("When there are a large number of interfaces, using the autoload api module provided by X-BUILD will save a lot of operations:")]),e._v(" "),a("h3",{attrs:{id:"api-directory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-directory","aria-hidden":"true"}},[e._v("#")]),e._v(" API Directory")]),e._v(" "),a("p",[e._v("Src/api/index.js is the api main entry file, using the [require.context] (https://webpack.docschina.org/guides/dependency-management/#require-context) method provided by webpack, inside the api/ All files (including subpaths) are automatically loaded and an object is exported via ES6.")]),e._v(" "),a("h3",{attrs:{id:"how-to-use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use","aria-hidden":"true"}},[e._v("#")]),e._v(" How to use")]),e._v(" "),a("p",[e._v("Assuming you create a GET request, create getUser.js under the api/ directory, here we use axios for example:")]),e._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// getUser.js")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" axios "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'axios'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("default")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" axios"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("The exported file will be retrieved by index.js and will be exported with the file name as the key in the object.")]),e._v(" "),a("h3",{attrs:{id:"using-the-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-the-interface","aria-hidden":"true"}},[e._v("#")]),e._v(" Using the interface")]),e._v(" "),a("p",[e._v("Suppose you use an interface in src/srcipts/index.js:")]),e._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" Api "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'../api'")]),e._v("\nApi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])])])},[],!1,null,null,null);t.default=s.exports}}]);